<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Mike Keim">
<meta name="dcterms.date" content="2023-01-12">

<title>Data Wrangling (Chapter 5) Answer Key</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="answerkey_files/libs/clipboard/clipboard.min.js"></script>
<script src="answerkey_files/libs/quarto-html/quarto.js"></script>
<script src="answerkey_files/libs/quarto-html/popper.min.js"></script>
<script src="answerkey_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="answerkey_files/libs/quarto-html/anchor.min.js"></script>
<link href="answerkey_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="answerkey_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="answerkey_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="answerkey_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="answerkey_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Wrangling (Chapter 5) Answer Key</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Mike Keim </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 12, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="cell">

</div>
<section id="chapter-5-answer-key-commentary" class="level1">
<h1>Chapter 5 Answer Key + Commentary</h1>
<section id="comments" class="level2">
<h2 class="anchored" data-anchor-id="comments">5.1.1 - 5.1.3 Comments</h2>
<p>I recommend you make a note of two things here: 1) The definitions for types of variables, in particular “logicals” and “factors” and 2) the list of functions in section 5.1.3</p>
<ul>
<li><p>logicals are often called “Booleans” after George Boole, a key figure in the development of symbolic logic (and grandfather-in-law to Putney’s founder Carmelita Hinton - how’s that for a brush with mathematical and computing fame?!)</p></li>
<li><p>factors are like those drop-down menus you encounter in a spreadsheet: Still going to be a categorical variable, but it has a limited set of options. For a Putney student, examples of factors would be things like “boarding/day” or “grade level” but examples of categorical variables that would not naturally fit as factors include “name” or “favorite sandwich.”</p></li>
</ul>
<p>Notes on the <code>filter</code> function: In the examples given, three things to remember:</p>
<ul>
<li><p>You can display the results, store the results of the variable, or do both by putting the assignment operation inside parentheses.</p></li>
<li><p>You can list sequentially any conditions you want to have met. Because this functions as a logical AND operator, the order does not matter. Results that are returned must satisfy all of the filter requirements.</p></li>
<li><p>Note that by default <code>filter</code> removes all <code>NA</code> values, so if you want to keep those in, you need to explicitly include them. (examples are given in section 5.2.3)</p></li>
<li><p>I think the visual Venn diagram in section 5.2.2 might be worth having close at hand for many of you.</p></li>
</ul>
</section>
<section id="answers" class="level2">
<h2 class="anchored" data-anchor-id="answers">5.2.4 Answers</h2>
<p>All responses to 1 are just to write code, shown here:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#1 Had an arrival delay of two or more hours</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(flights,arr_delay<span class="sc">&gt;=</span><span class="dv">120</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10,200 × 19
    year month   day dep_time sched_de…¹ dep_d…² arr_t…³ sched…⁴ arr_d…⁵ carrier
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;      &lt;int&gt;   &lt;dbl&gt;   &lt;int&gt;   &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;  
 1  2013     1     1      811        630     101    1047     830     137 MQ     
 2  2013     1     1      848       1835     853    1001    1950     851 MQ     
 3  2013     1     1      957        733     144    1056     853     123 UA     
 4  2013     1     1     1114        900     134    1447    1222     145 UA     
 5  2013     1     1     1505       1310     115    1638    1431     127 EV     
 6  2013     1     1     1525       1340     105    1831    1626     125 B6     
 7  2013     1     1     1549       1445      64    1912    1656     136 EV     
 8  2013     1     1     1558       1359     119    1718    1515     123 EV     
 9  2013     1     1     1732       1630      62    2028    1825     123 EV     
10  2013     1     1     1803       1620     103    2008    1750     138 MQ     
# … with 10,190 more rows, 9 more variables: flight &lt;int&gt;, tailnum &lt;chr&gt;,
#   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
#   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, and abbreviated variable names
#   ¹​sched_dep_time, ²​dep_delay, ³​arr_time, ⁴​sched_arr_time, ⁵​arr_delay</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#2 Flew to Houston (IAH or HOU)</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(flights,dest <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"HOU"</span>,<span class="st">"IAH"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9,313 × 19
    year month   day dep_time sched_de…¹ dep_d…² arr_t…³ sched…⁴ arr_d…⁵ carrier
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;      &lt;int&gt;   &lt;dbl&gt;   &lt;int&gt;   &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;  
 1  2013     1     1      517        515       2     830     819      11 UA     
 2  2013     1     1      533        529       4     850     830      20 UA     
 3  2013     1     1      623        627      -4     933     932       1 UA     
 4  2013     1     1      728        732      -4    1041    1038       3 UA     
 5  2013     1     1      739        739       0    1104    1038      26 UA     
 6  2013     1     1      908        908       0    1228    1219       9 UA     
 7  2013     1     1     1028       1026       2    1350    1339      11 UA     
 8  2013     1     1     1044       1045      -1    1352    1351       1 UA     
 9  2013     1     1     1114        900     134    1447    1222     145 UA     
10  2013     1     1     1205       1200       5    1503    1505      -2 UA     
# … with 9,303 more rows, 9 more variables: flight &lt;int&gt;, tailnum &lt;chr&gt;,
#   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
#   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, and abbreviated variable names
#   ¹​sched_dep_time, ²​dep_delay, ³​arr_time, ⁴​sched_arr_time, ⁵​arr_delay</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#3 Were operated by United, American, or Delta</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(flights<span class="sc">$</span>carrier) <span class="co"># to ge the acronyms/abbreviations correct</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "UA" "AA" "B6" "DL" "EV" "MQ" "US" "WN" "VX" "FL" "AS" "9E" "F9" "HA" "YV"
[16] "OO"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(flights,carrier <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"UA"</span>,<span class="st">"DL"</span>,<span class="st">"AA"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 139,504 × 19
    year month   day dep_time sched_de…¹ dep_d…² arr_t…³ sched…⁴ arr_d…⁵ carrier
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;      &lt;int&gt;   &lt;dbl&gt;   &lt;int&gt;   &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;  
 1  2013     1     1      517        515       2     830     819      11 UA     
 2  2013     1     1      533        529       4     850     830      20 UA     
 3  2013     1     1      542        540       2     923     850      33 AA     
 4  2013     1     1      554        600      -6     812     837     -25 DL     
 5  2013     1     1      554        558      -4     740     728      12 UA     
 6  2013     1     1      558        600      -2     753     745       8 AA     
 7  2013     1     1      558        600      -2     924     917       7 UA     
 8  2013     1     1      558        600      -2     923     937     -14 UA     
 9  2013     1     1      559        600      -1     941     910      31 AA     
10  2013     1     1      559        600      -1     854     902      -8 UA     
# … with 139,494 more rows, 9 more variables: flight &lt;int&gt;, tailnum &lt;chr&gt;,
#   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
#   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, and abbreviated variable names
#   ¹​sched_dep_time, ²​dep_delay, ³​arr_time, ⁴​sched_arr_time, ⁵​arr_delay</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#4 Departed in summer (July, August, and September)</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(flights,month <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 86,326 × 19
    year month   day dep_time sched_de…¹ dep_d…² arr_t…³ sched…⁴ arr_d…⁵ carrier
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;      &lt;int&gt;   &lt;dbl&gt;   &lt;int&gt;   &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;  
 1  2013     7     1        1       2029     212     236    2359     157 B6     
 2  2013     7     1        2       2359       3     344     344       0 B6     
 3  2013     7     1       29       2245     104     151       1     110 B6     
 4  2013     7     1       43       2130     193     322      14     188 B6     
 5  2013     7     1       44       2150     174     300     100     120 AA     
 6  2013     7     1       46       2051     235     304    2358     186 B6     
 7  2013     7     1       48       2001     287     308    2305     243 VX     
 8  2013     7     1       58       2155     183     335      43     172 B6     
 9  2013     7     1      100       2146     194     327      30     177 B6     
10  2013     7     1      100       2245     135     337     135     122 B6     
# … with 86,316 more rows, 9 more variables: flight &lt;int&gt;, tailnum &lt;chr&gt;,
#   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
#   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, and abbreviated variable names
#   ¹​sched_dep_time, ²​dep_delay, ³​arr_time, ⁴​sched_arr_time, ⁵​arr_delay</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#5 Arrived more than two hours late, but didn’t leave late</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(flights,arr_delay<span class="sc">&gt;=</span><span class="dv">120</span>,dep_delay<span class="sc">&lt;=</span><span class="dv">15</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 54 × 19
    year month   day dep_time sched_de…¹ dep_d…² arr_t…³ sched…⁴ arr_d…⁵ carrier
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;      &lt;int&gt;   &lt;dbl&gt;   &lt;int&gt;   &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;  
 1  2013     1    27     1419       1420      -1    1754    1550     124 MQ     
 2  2013    10     7     1350       1350       0    1736    1526     130 EV     
 3  2013    10     7     1357       1359      -2    1858    1654     124 AA     
 4  2013    10    16      657        700      -3    1258    1056     122 B6     
 5  2013    11     1      658        700      -2    1329    1015     194 VX     
 6  2013    11    11     1604       1559       5    1932    1732     120 UA     
 7  2013    12     5      902        847      15    1423    1211     132 UA     
 8  2013    12     8     1608       1600       8    1957    1741     136 UA     
 9  2013     3     8     1246       1245       1    1552    1350     122 AA     
10  2013     3    18     1844       1847      -3      39    2219     140 UA     
# … with 44 more rows, 9 more variables: flight &lt;int&gt;, tailnum &lt;chr&gt;,
#   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
#   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, and abbreviated variable names
#   ¹​sched_dep_time, ²​dep_delay, ³​arr_time, ⁴​sched_arr_time, ⁵​arr_delay</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Google tells me that anything less than 15 minutes is still considered "on time"</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co"># https://www.bts.gov/explore-topics-and-geography/topics/airline-time-performance-and-causes-flight-delays#:~:text=from%20U.S.%20airports.-,How%20are%20flight%20delays%20calculated%3F,on%20departure%20from%20the%20gate.</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co">#6 Were delayed by at least an hour, but made up over 30 minutes in flight</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(flights,dep_delay<span class="sc">&gt;=</span><span class="dv">60</span>,arr_delay<span class="sc">&lt;</span>dep_delay<span class="dv">-30</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,844 × 19
    year month   day dep_time sched_de…¹ dep_d…² arr_t…³ sched…⁴ arr_d…⁵ carrier
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;      &lt;int&gt;   &lt;dbl&gt;   &lt;int&gt;   &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;  
 1  2013     1     1     2205       1720     285      46    2040     246 AA     
 2  2013     1     1     2326       2130     116     131      18      73 B6     
 3  2013     1     3     1503       1221     162    1803    1555     128 UA     
 4  2013     1     3     1839       1700      99    2056    1950      66 AA     
 5  2013     1     3     1850       1745      65    2148    2120      28 AA     
 6  2013     1     3     1941       1759     102    2246    2139      67 UA     
 7  2013     1     3     1950       1845      65    2228    2227       1 B6     
 8  2013     1     3     2015       1915      60    2135    2111      24 9E     
 9  2013     1     3     2257       2000     177      45    2224     141 9E     
10  2013     1     4     1917       1700     137    2135    1950     105 AA     
# … with 1,834 more rows, 9 more variables: flight &lt;int&gt;, tailnum &lt;chr&gt;,
#   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
#   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, and abbreviated variable names
#   ¹​sched_dep_time, ²​dep_delay, ³​arr_time, ⁴​sched_arr_time, ⁵​arr_delay</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#7 Departed between midnight and 6am (inclusive)</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co"># NB: dep_time is formatted as 4-digit times NOT as minutes, just as HH:MM without the colon!</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(flights,dep_time<span class="sc">&gt;=</span><span class="dv">0</span>,dep_time<span class="sc">&lt;=</span><span class="dv">0600</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9,344 × 19
    year month   day dep_time sched_de…¹ dep_d…² arr_t…³ sched…⁴ arr_d…⁵ carrier
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;      &lt;int&gt;   &lt;dbl&gt;   &lt;int&gt;   &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;  
 1  2013     1     1      517        515       2     830     819      11 UA     
 2  2013     1     1      533        529       4     850     830      20 UA     
 3  2013     1     1      542        540       2     923     850      33 AA     
 4  2013     1     1      544        545      -1    1004    1022     -18 B6     
 5  2013     1     1      554        600      -6     812     837     -25 DL     
 6  2013     1     1      554        558      -4     740     728      12 UA     
 7  2013     1     1      555        600      -5     913     854      19 B6     
 8  2013     1     1      557        600      -3     709     723     -14 EV     
 9  2013     1     1      557        600      -3     838     846      -8 B6     
10  2013     1     1      558        600      -2     753     745       8 AA     
# … with 9,334 more rows, 9 more variables: flight &lt;int&gt;, tailnum &lt;chr&gt;,
#   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
#   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, and abbreviated variable names
#   ¹​sched_dep_time, ²​dep_delay, ³​arr_time, ⁴​sched_arr_time, ⁵​arr_delay</code></pre>
</div>
</div>
<ol start="2" type="1">
<li><p>The between function allows you to simplify inequalities if you have something in a range, like question 1.7 above, which could be written as: <code>filter(flights,between(dep_time,0,360))</code> It’s worth noting that “between” defaults to inclusive bounds.</p></li>
<li><p>There were 8255 flights with no departure time. These rows also had no departure delay, arrival time, arrival delay, or airtime values, i.e.&nbsp;any of the values that need to be recorded AFTER take-off. These correspond to cancelled flights. We can find that number using <code>nrow(filter(flights,is.na(dep_time)))</code>. You may want to look at the RMarkdown file for this answer key to see how to include that number calculation directly (rather than having to run code and then enter the result in the RMarkdown file…)</p></li>
<li><p>These questions are a bit tricky actually, and I don’t find them totally consistent. Let me take them in order:</p></li>
</ol>
<ul>
<li><p>Why is <code>NA ^ 0</code> not missing? Well, this choice by the R developers implies a slightly overbroad statement that for any real number <span class="math inline">\(x\)</span>, <span class="math inline">\(x^0 = 1\)</span>, which is true provided <span class="math inline">\(x \neq 0\)</span> but the expression <span class="math inline">\(0^0\)</span> is mathematically undefined. However, the code <code>0^0</code> evaluates to 1 in R. For an interesting, and mathematically more correct alternative for how to handle this case, see <a href="https://www.wolframalpha.com/">Wolfram Alpha</a> and enter <code>0^0</code> to see how they handle that case.</p></li>
<li><p>Why is <code>NA | TRUE</code> not missing? The key here is to understand that in this context <code>NA</code> is standing in for an expression that would evaluate to a logical/Boolean variable, i.e.&nbsp;NA isn’t <em>anything</em> in this context; it’s either <code>TRUE</code> or <code>FALSE</code>. But, when you look at either of those cases and consider how it will evaluate when combined with <code>TRUE</code> in an OR statement (signified by <code>|</code>) then it’s easy to see that both <code>FALSE | TRUE</code> and <code>TRUE | TRUE</code> will evaluate to <code>TRUE</code>.</p></li>
<li><p>Why is <code>FALSE &amp; NA</code> not missing? The same argument holds here as above, except that now it’s in an AND statement, so both <code>FALSE &amp; FALSE</code> and <code>FALSE &amp; TRUE</code> will evaluate to <code>FALSE</code>.</p></li>
<li><p>Can you figure out the general rule? (<code>NA * 0</code> is a tricky counterexample!) The general rule is something along the lines of “If the outcome does not depend on what the actual value of NA is, then the expression will evaluate to whatever that outcome is. The <code>NA*0</code> counterexample is actually a weird thing to bring up because in <em>this</em> case the developers chose to hew more closely to the strict mathematical line by allowing the possibilities that the <code>NA</code> value might be <span class="math inline">\(\pm \infty\)</span> which is, in my opinion, at odds with their smoothing over the <span class="math inline">\(0^0\)</span> case earlier on. But… this is rarely of any practical importance in actual data analysis.</p></li>
</ul>
</section>
<section id="comments-1" class="level2">
<h2 class="anchored" data-anchor-id="comments-1">5.3 Comments</h2>
<p>A rather trivial point to make, but if you want a way to remember that <code>arrange()</code> will default to ordering in increasing order, you might note that sorting A-Z is more common as a default than Z-A.</p>
</section>
<section id="answers-1" class="level2">
<h2 class="anchored" data-anchor-id="answers-1">5.3.1 Answers</h2>
<ol type="1">
<li>How could you use <code>arrange()</code> to sort all missing values to the start? (Hint: use is.na()).</li>
</ol>
<p>The issue here is that <code>arrange()</code> puts <code>NA</code> values at the end regarldess of whether you use the <code>desc()</code> option or not. Recall the advice back at the end of section 5.2.2:</p>
<blockquote class="blockquote">
<p>Whenever you start using complicated, multipart expressions in <code>filter()</code>, consider making them explicit variables instead. That makes it much easier to check your work. You’ll learn how to create new variables shortly.</p>
</blockquote>
<p>Here we are going to apply that advice by creating a logical variable by running <code>is.na(dep_time)</code> within the <code>arrange</code> function as follows:</p>
<p><code>arrange(flights, desc(is.na(dep_time)), dep_time)</code></p>
<p>Now, two things to note here: 1) <code>is.na(dep_time)</code> evaluates to a vector of <code>TRUE</code> or <code>FALSE</code> values, which can be thought of as 1 for <code>TRUE</code> and 0 for <code>FALSE</code> - hence <em>this</em> variable should be sorted in descending order if we want the <code>NAs</code> before the non-NA values. Also, 2) listing <code>dep_time</code> after <code>desc(is.na(dep_time))</code> means we will have flights that do have departure times arranged in increasing order, i.e.&nbsp;the <code>desc</code> only applies to the first variable used by <code>arrange</code>.</p>
<ol start="2" type="1">
<li><p>You can sort flights to find the most delayed flights by running <code>arrange(flights,desc(dep_delay))</code> and find the flights that left earliest (which I assume means “earliest in the day” not “earliest relative to their scheduled departure time) by running <code>arrange(flights,dep_time)</code>. If you wanted earliest in the <em>YEAR</em> then you would run <code>arrange(flights,day,dep_time)</code></p></li>
<li><p>Sort flights to find the fastest (highest speed) flights. I assume this means fastest average speed over the duration of the flight.</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(flights,<span class="fu">desc</span>(distance<span class="sc">/</span>(air_time)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 336,776 × 19
    year month   day dep_time sched_de…¹ dep_d…² arr_t…³ sched…⁴ arr_d…⁵ carrier
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;      &lt;int&gt;   &lt;dbl&gt;   &lt;int&gt;   &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;  
 1  2013     5    25     1709       1700       9    1923    1937     -14 DL     
 2  2013     7     2     1558       1513      45    1745    1719      26 EV     
 3  2013     5    13     2040       2025      15    2225    2226      -1 EV     
 4  2013     3    23     1914       1910       4    2045    2043       2 EV     
 5  2013     1    12     1559       1600      -1    1849    1917     -28 DL     
 6  2013    11    17      650        655      -5    1059    1150     -51 DL     
 7  2013     2    21     2355       2358      -3     412     438     -26 B6     
 8  2013    11    17      759        800      -1    1212    1255     -43 AA     
 9  2013    11    16     2003       1925      38      17      36     -19 DL     
10  2013    11    16     2349       2359     -10     402     440     -38 B6     
# … with 336,766 more rows, 9 more variables: flight &lt;int&gt;, tailnum &lt;chr&gt;,
#   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
#   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, and abbreviated variable names
#   ¹​sched_dep_time, ²​dep_delay, ³​arr_time, ⁴​sched_arr_time, ⁵​arr_delay</code></pre>
</div>
</div>
<ol start="4" type="1">
<li>Which flights travelled the farthest? Which travelled the shortest?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>farthest<span class="ot">&lt;-</span><span class="fu">arrange</span>(flights,<span class="fu">desc</span>(distance))</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>shortest<span class="ot">&lt;-</span><span class="fu">arrange</span>(flights,distance)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The farthest flight was flight # 51 by HA from JFK to HNL. The shortest flight was flight # 1632 by US from EWR to LGA.</p>
<p>Notice that it would be nice to have a little script that could convert “HA” to “Hawaiian Airlines” and “US” to “US Airways”. A litle digging uncovers the “airlines” tibble in the nycflights library, which we can leverage this way:</p>
<p>The farthest flight was flight # 51 by Hawaiian Airlines Inc.&nbsp;from JFK to HNL. But something about that “Inc.” at the end remains unsatisfying.</p>
</section>
<section id="answers-2" class="level2">
<h2 class="anchored" data-anchor-id="answers-2">5.4.1 Answers</h2>
<ol type="1">
<li>Brainstorm as many ways as possible to select dep_time, dep_delay, arr_time, and arr_delay from flights. The most straightforward is just to list the variable names like this: <code>select(flights,"dep_time","dep_delay","arr_time","arr_delay")</code> and if it’s only four variables, that’s probably what I’d recommend.</li>
</ol>
<p>Other options like: <code>select(flights,starts_with("dep"),starts_with("arr"))</code> also work in this case, but some others like * <code>select(flights,ends_with("time"),ends_with("delay"))</code> or * <code>select(flights,contains("dep"),contains("arr"))</code> or * <code>select(flights,contains("time"),contains("delay"))</code> will end up grabbing unintended variables like <code>scheduled_departure_time</code>.</p>
<ol start="2" type="1">
<li>What happens if you include the name of a variable multiple times in a select() call?</li>
</ol>
<p>The line <code>select(flights,"dep_time","dep_time")</code> just returns the same output as <code>select(flights,"dep_time")</code>.</p>
<p><a href="https://jrnold.github.io/r4ds-exercise-solutions/transform.html#select">The Answer Key</a> presents some utility for this fact, by allowing you to use <code>select</code> with any particular variable you want to move to the first column of the list, along with the <code>everything()</code>, e.g.&nbsp;by writing <code>select(flights,"dep_time",everything())</code> to move <code>dep_time</code> to the first column</p>
<ol start="3" type="1">
<li>What does the <code>any_of()</code> function do? Why might it be helpful in conjunction with this vector? <code>vars &lt;- c("year", "month", "day", "dep_delay", "arr_delay")</code></li>
</ol>
<p>The <code>anyof()</code> function allows you to feed a list of variable names to the <code>select()</code> function, but I’m unclear how this is of great utility. The help file (<code>?any_of()</code>) and <a href="https://tidyselect.r-lib.org/reference/language.html">this page</a> make some arguments for how this can be useful if you’re missing some values and don’t want to exclude them. I would not get too hung up on this particular question for now.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"month"</span>, <span class="st">"day"</span>, <span class="st">"dep_delay"</span>, <span class="st">"arr_delay"</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(flights,<span class="fu">any_of</span>(vars)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 336,776 × 5
    year month   day dep_delay arr_delay
   &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;
 1  2013     1     1         2        11
 2  2013     1     1         4        20
 3  2013     1     1         2        33
 4  2013     1     1        -1       -18
 5  2013     1     1        -6       -25
 6  2013     1     1        -4        12
 7  2013     1     1        -5        19
 8  2013     1     1        -3       -14
 9  2013     1     1        -3        -8
10  2013     1     1        -2         8
# … with 336,766 more rows</code></pre>
</div>
</div>
<ol start="4" type="1">
<li>Does the result of running the following code surprise you? How do the select helpers deal with case by default? How can you change that default? <code>select(flights, contains("TIME"))</code></li>
</ol>
<p>I guess no, not really. When things are case-sensitive, or not, does not have a coherent logic in my mind outside of password protection contexts. So here, the strings “time”, “TIME” and, oh, perhaps “tImE” are all treated the same. If you want to induce/force case sensitivity, you can add this option: <code>select(flights, contains("TIME",ignore.case=FALSE))</code>. Notice that the <code>ignore.case</code> part goes INSIDE the <code>contains</code> helper function.</p>
<p>But how would you have known this? This is where you want to get comfortable with your internet searching skills. I started with “r select case sensitive” and the first hit was this <a href="https://stackoverflow.com/questions/54634124/dplyrend-with-and-case-sensitivity">stackoverflow page</a> which had the answer I needed, and also this link to a helpful <a href="https://www.rdocumentation.org/packages/tidyselect/versions/0.2.5/topics/select_helpers">reference page</a> specifically on the helper functions.</p>
</section>
<section id="comments-on-the-mutate-function" class="level2">
<h2 class="anchored" data-anchor-id="comments-on-the-mutate-function">5.5 Comments on the <code>mutate()</code> function</h2>
</section>
<section id="answers-3" class="level2">
<h2 class="anchored" data-anchor-id="answers-3">5.5.2 Answers</h2>
</section>
<section id="answers-4" class="level2">
<h2 class="anchored" data-anchor-id="answers-4">5.6.7 Answers</h2>
</section>
<section id="answers-5" class="level2">
<h2 class="anchored" data-anchor-id="answers-5">5.7.1 Answers</h2>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>